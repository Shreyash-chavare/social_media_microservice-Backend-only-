{"level":"error","message":"TypeError: redisClient.consume is not a function\n    at file:///D:/Nodejs/microservices/identity-service/src/server.js:38:17\n    at Layer.handleRequest (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:342:13)\n    at D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:297:9\n    at processParams (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:582:12)\n    at next (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:291:5)\n    at file:///D:/Nodejs/microservices/identity-service/src/server.js:27:5\n    at Layer.handleRequest (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:342:13)\n    at D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:297:9","service":"identity-service","timestamp":"2025-12-29T15:00:31.048Z"}
{"level":"error","message":"TypeError: redisClient.consume is not a function\n    at file:///D:/Nodejs/microservices/identity-service/src/server.js:38:17\n    at Layer.handleRequest (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:342:13)\n    at D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:297:9\n    at processParams (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:582:12)\n    at next (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:291:5)\n    at file:///D:/Nodejs/microservices/identity-service/src/server.js:27:5\n    at Layer.handleRequest (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:342:13)\n    at D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:297:9","service":"identity-service","timestamp":"2025-12-29T15:02:33.790Z"}
{"level":"error","message":"TypeError: redisClient.consume is not a function\n    at file:///D:/Nodejs/microservices/identity-service/src/server.js:38:17\n    at Layer.handleRequest (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:342:13)\n    at D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:297:9\n    at processParams (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:582:12)\n    at next (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:291:5)\n    at file:///D:/Nodejs/microservices/identity-service/src/server.js:27:5\n    at Layer.handleRequest (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:342:13)\n    at D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:297:9","service":"identity-service","timestamp":"2025-12-29T15:04:42.799Z"}
{"level":"error","message":"TypeError: redisClient.consume is not a function\n    at file:///D:/Nodejs/microservices/identity-service/src/server.js:38:17\n    at Layer.handleRequest (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:342:13)\n    at D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:297:9\n    at processParams (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:582:12)\n    at next (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:291:5)\n    at file:///D:/Nodejs/microservices/identity-service/src/server.js:27:5\n    at Layer.handleRequest (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:342:13)\n    at D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:297:9","service":"identity-service","timestamp":"2025-12-29T15:05:32.643Z"}
{"level":"error","message":"user registration error registrationValidation is not defined","service":"identity-service","stack":"ReferenceError: registrationValidation is not defined\n    at Registration (file:///D:/Nodejs/microservices/identity-service/src/controllers/identity-controller.js:12:19)\n    at Layer.handleRequest (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\lib\\layer.js:152:17)\n    at D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:295:15\n    at processParams (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:582:12)\n    at next (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:291:5)\n    at Function.handle (D:\\Nodejs\\microservices\\identity-service\\node_modules\\router\\index.js:186:3)","timestamp":"2025-12-29T15:08:01.314Z"}
{"_message":"User validation failed","errors":{"username":{"kind":"required","message":"Path `username` is required.","name":"ValidatorError","path":"username","properties":{"message":"Path `username` is required.","path":"username","type":"required"}}},"level":"error","message":"user registration error User validation failed: username: Path `username` is required.","service":"identity-service","stack":"ValidationError: User validation failed: username: Path `username` is required.\n    at Document.invalidate (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:3377:32)\n    at validatePath (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:3152:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Promise.all (index 0)\n    at async model.$__validate (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:3093:3)\n    at async model.validate (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:2670:5)\n    at async model.validateBeforeSave (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\plugins\\validateBeforeSave.js:34:7)\n    at async Kareem.execPre (D:\\Nodejs\\microservices\\identity-service\\node_modules\\kareem\\index.js:65:24)\n    at async model.$__save (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\model.js:369:5)\n    at async model.save (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\model.js:609:5)","timestamp":"2025-12-29T15:12:07.387Z"}
{"_message":"User validation failed","errors":{"username":{"kind":"required","message":"Path `username` is required.","name":"ValidatorError","path":"username","properties":{"message":"Path `username` is required.","path":"username","type":"required"}}},"level":"error","message":"user registration error User validation failed: username: Path `username` is required.","service":"identity-service","stack":"ValidationError: User validation failed: username: Path `username` is required.\n    at Document.invalidate (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:3377:32)\n    at validatePath (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:3152:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Promise.all (index 0)\n    at async model.$__validate (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:3093:3)\n    at async model.validate (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:2670:5)\n    at async model.validateBeforeSave (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\plugins\\validateBeforeSave.js:34:7)\n    at async Kareem.execPre (D:\\Nodejs\\microservices\\identity-service\\node_modules\\kareem\\index.js:65:24)\n    at async model.$__save (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\model.js:369:5)\n    at async model.save (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\model.js:609:5)","timestamp":"2025-12-29T15:14:56.509Z"}
{"level":"error","message":"user registration error next is not a function","service":"identity-service","stack":"TypeError: next is not a function\n    at model.<anonymous> (file:///D:/Nodejs/microservices/identity-service/src/models/user.js:36:21)\n    at async Kareem.execPre (D:\\Nodejs\\microservices\\identity-service\\node_modules\\kareem\\index.js:65:24)\n    at async model.$__save (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\model.js:369:5)\n    at async model.save (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\model.js:609:5)\n    at async Registration (file:///D:/Nodejs/microservices/identity-service/src/controllers/identity-controller.js:37:7)","timestamp":"2025-12-29T15:15:31.424Z"}
{"0":" ","1":"r","2":"e","3":"a","4":"s","5":"o","6":"n","7":":","8":" ","level":"error","message":"unhandled Rejection at","service":"identity-service","timestamp":"2025-12-29T15:21:09.757Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","level":"error","message":"unhandled Rejection at","service":"identity-service","timestamp":"2025-12-29T15:23:48.653Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","level":"error","message":"unhandled Rejection at","service":"identity-service","timestamp":"2025-12-30T08:03:58.307Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","level":"error","message":"unhandled Rejection at","service":"identity-service","timestamp":"2025-12-30T08:05:58.214Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","level":"error","message":"unhandled Rejection at","service":"identity-service","timestamp":"2025-12-30T08:06:21.407Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","level":"error","message":"unhandled Rejection at","service":"identity-service","timestamp":"2025-12-30T08:07:35.043Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","level":"error","message":"unhandled Rejection at","service":"identity-service","timestamp":"2025-12-30T08:09:23.726Z"}
{"level":"error","message":"user login error User.verification is not a function","service":"identity-service","stack":"TypeError: User.verification is not a function\n    at Login (file:///D:/Nodejs/microservices/identity-service/src/controllers/identity-controller.js:78:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-12-30T14:05:54.305Z"}
{"level":"error","message":"user login error User.verification is not a function","service":"identity-service","stack":"TypeError: User.verification is not a function\n    at Login (file:///D:/Nodejs/microservices/identity-service/src/controllers/identity-controller.js:78:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-12-30T14:08:00.794Z"}
{"level":"error","message":"user login error Cannot read properties of undefined (reading 'details')","service":"identity-service","stack":"TypeError: Cannot read properties of undefined (reading 'details')\n    at Login (file:///D:/Nodejs/microservices/identity-service/src/controllers/identity-controller.js:81:50)","timestamp":"2025-12-30T14:19:41.014Z"}
{"code":"ERR_INVALID_ARG_TYPE","level":"error","message":"user login error The first argument must be of type string or an instance of Buffer, ArrayBuffer, or Array or an Array-like Object. Received type number (12345)","service":"identity-service","stack":"TypeError [ERR_INVALID_ARG_TYPE]: The first argument must be of type string or an instance of Buffer, ArrayBuffer, or Array or an Array-like Object. Received type number (12345)\n    at Function.from (node:buffer:319:9)\n    at Object.verify (D:\\Nodejs\\microservices\\identity-service\\node_modules\\argon2\\argon2.cjs:182:24)\n    at Userschema.methods.verification (file:///D:/Nodejs/microservices/identity-service/src/models/user.js:43:29)\n    at Login (file:///D:/Nodejs/microservices/identity-service/src/controllers/identity-controller.js:78:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-12-30T14:22:05.790Z"}
{"code":"ERR_INVALID_ARG_TYPE","level":"error","message":"user login error The first argument must be of type string or an instance of Buffer, ArrayBuffer, or Array or an Array-like Object. Received type number (12345)","service":"identity-service","stack":"TypeError [ERR_INVALID_ARG_TYPE]: The first argument must be of type string or an instance of Buffer, ArrayBuffer, or Array or an Array-like Object. Received type number (12345)\n    at Function.from (node:buffer:319:9)\n    at Object.verify (D:\\Nodejs\\microservices\\identity-service\\node_modules\\argon2\\argon2.cjs:182:24)\n    at Userschema.methods.verification (file:///D:/Nodejs/microservices/identity-service/src/models/user.js:43:29)\n    at Login (file:///D:/Nodejs/microservices/identity-service/src/controllers/identity-controller.js:78:43)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-12-30T14:22:46.316Z"}
{"level":"error","message":"user login error Cannot read properties of undefined (reading 'details')","service":"identity-service","stack":"TypeError: Cannot read properties of undefined (reading 'details')\n    at Login (file:///D:/Nodejs/microservices/identity-service/src/controllers/identity-controller.js:81:50)","timestamp":"2025-12-30T14:23:25.123Z"}
{"level":"error","message":"user login error err is not defined","service":"identity-service","stack":"ReferenceError: err is not defined\n    at Login (file:///D:/Nodejs/microservices/identity-service/src/controllers/identity-controller.js:81:46)","timestamp":"2025-12-30T14:26:50.438Z"}
{"level":"error","message":"user login error err is not defined","service":"identity-service","stack":"ReferenceError: err is not defined\n    at Login (file:///D:/Nodejs/microservices/identity-service/src/controllers/identity-controller.js:81:46)","timestamp":"2025-12-30T14:27:41.713Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","level":"error","message":"unhandled Rejection at","service":"identity-service","timestamp":"2025-12-30T14:29:10.361Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","level":"error","message":"unhandled Rejection at","service":"identity-service","timestamp":"2025-12-30T14:29:32.855Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","level":"error","message":"unhandled Rejection at","service":"identity-service","timestamp":"2025-12-30T14:31:36.275Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","level":"error","message":"unhandled Rejection at","service":"identity-service","timestamp":"2025-12-30T14:31:57.343Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","level":"error","message":"unhandled Rejection at","service":"identity-service","timestamp":"2025-12-30T14:33:16.881Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","level":"error","message":"unhandled Rejection at","service":"identity-service","timestamp":"2025-12-30T14:35:31.070Z"}
{"level":"error","message":"user login error secretOrPrivateKey must have a value","service":"identity-service","stack":"Error: secretOrPrivateKey must have a value\n    at module.exports [as sign] (D:\\Nodejs\\microservices\\identity-service\\node_modules\\jsonwebtoken\\sign.js:111:20)\n    at generateToken (file:///D:/Nodejs/microservices/identity-service/src/utils/generateToken.js:6:27)\n    at Login (file:///D:/Nodejs/microservices/identity-service/src/controllers/identity-controller.js:88:49)","timestamp":"2025-12-30T14:36:55.373Z"}
{"_message":"Token validation failed","errors":{"expireAt":{"kind":"required","message":"Path `expireAt` is required.","name":"ValidatorError","path":"expireAt","properties":{"message":"Path `expireAt` is required.","path":"expireAt","type":"required"}}},"level":"error","message":"user login error Token validation failed: expireAt: Path `expireAt` is required.","service":"identity-service","stack":"ValidationError: Token validation failed: expireAt: Path `expireAt` is required.\n    at Document.invalidate (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:3377:32)\n    at validatePath (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:3152:13)\n    at async Promise.all (index 0)\n    at async model.$__validate (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:3093:3)\n    at async model.validate (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:2670:5)\n    at async model.validateBeforeSave (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\plugins\\validateBeforeSave.js:34:7)\n    at async Kareem.execPre (D:\\Nodejs\\microservices\\identity-service\\node_modules\\kareem\\index.js:65:24)\n    at async model.$__save (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\model.js:369:5)\n    at async model.save (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\model.js:609:5)\n    at async D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\model.js:2722:9","timestamp":"2025-12-30T14:38:17.085Z"}
{"_message":"Token validation failed","errors":{"expireAt":{"kind":"required","message":"Path `expireAt` is required.","name":"ValidatorError","path":"expireAt","properties":{"message":"Path `expireAt` is required.","path":"expireAt","type":"required"}}},"level":"error","message":"user login error Token validation failed: expireAt: Path `expireAt` is required.","service":"identity-service","stack":"ValidationError: Token validation failed: expireAt: Path `expireAt` is required.\n    at Document.invalidate (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:3377:32)\n    at validatePath (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:3152:13)\n    at async Promise.all (index 0)\n    at async model.$__validate (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:3093:3)\n    at async model.validate (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:2670:5)\n    at async model.validateBeforeSave (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\plugins\\validateBeforeSave.js:34:7)\n    at async Kareem.execPre (D:\\Nodejs\\microservices\\identity-service\\node_modules\\kareem\\index.js:65:24)\n    at async model.$__save (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\model.js:369:5)\n    at async model.save (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\model.js:609:5)\n    at async D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\model.js:2722:9","timestamp":"2025-12-30T14:39:19.851Z"}
{"level":"error","message":"user login error expiresAt is not defined","service":"identity-service","stack":"ReferenceError: expiresAt is not defined\n    at generateToken (file:///D:/Nodejs/microservices/identity-service/src/utils/generateToken.js:13:23)\n    at Login (file:///D:/Nodejs/microservices/identity-service/src/controllers/identity-controller.js:88:49)","timestamp":"2025-12-30T14:40:48.855Z"}
{"_message":"Token validation failed","errors":{"expireeAt":{"kind":"required","message":"Path `expireeAt` is required.","name":"ValidatorError","path":"expireeAt","properties":{"message":"Path `expireeAt` is required.","path":"expireeAt","type":"required"}}},"level":"error","message":"user login error Token validation failed: expireeAt: Path `expireeAt` is required.","service":"identity-service","stack":"ValidationError: Token validation failed: expireeAt: Path `expireeAt` is required.\n    at Document.invalidate (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:3377:32)\n    at validatePath (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:3152:13)\n    at async Promise.all (index 0)\n    at async model.$__validate (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:3093:3)\n    at async model.validate (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\document.js:2670:5)\n    at async model.validateBeforeSave (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\plugins\\validateBeforeSave.js:34:7)\n    at async Kareem.execPre (D:\\Nodejs\\microservices\\identity-service\\node_modules\\kareem\\index.js:65:24)\n    at async model.$__save (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\model.js:369:5)\n    at async model.save (D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\model.js:609:5)\n    at async D:\\Nodejs\\microservices\\identity-service\\node_modules\\mongoose\\lib\\model.js:2722:9","timestamp":"2025-12-30T14:41:15.816Z"}
